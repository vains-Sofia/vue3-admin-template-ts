import{d as te,k,G as le,j as ue,r,o as c,g as T,m as d,c as g,w as t,b as e,e as i,t as m,i as C,f as V,F as D,h as U,I as O,x as ae,y as oe,J as ne}from"./index.f38b905c.js";import{g as se,a as ie,u as re}from"./ClientApi.c08bf63e.js";import{c as P}from"./Utils.fcf89101.js";import{n as de}from"./IdWorker.6114c90c.js";import{_ as ce}from"./_plugin-vue_export-helper.cdc0426e.js";import"./Request.64893a2b.js";const S=y=>(ae("data-v-b5e828d2"),y=y(),oe(),y),pe={class:"base-shadow base-not-bottom-padding endpoint-media-set"},me=S(()=>d("div",{class:"header-text"},"\u7AEF\u70B9\u4FE1\u606F",-1)),_e={class:"client-info"},fe={class:"client-info base-shadow base-not-bottom-padding basic-info-media-set"},ve=S(()=>d("div",{class:"header-text"},"\u57FA\u672C\u4FE1\u606F",-1)),ge={style:{"margin-left":"62px"},class:"app-logo"},he=S(()=>d("div",{class:"header-text"},"\u5E94\u7528Logo",-1)),ke={class:"base-shadow base-padding"},be={class:"other-settings"},Fe={class:"app-url"},Te=S(()=>d("div",{class:"header-text"},"\u8BA4\u8BC1\u76F8\u5173\u8BBE\u7F6E",-1)),ye={class:"client-settings"},Ae={class:"el-input"},De=te({__name:"SysClientDetailChange",setup(y){const x=k(le.currentRoute.value.params.id),l=k({}),s=k({}),M=ue(()=>{const n=window.localStorage.getItem("token");return n?new Headers({Authorization:n}):null}),w=()=>{typeof x.value=="string"&&ie(x.value).then(n=>{l.value=n.data})},j=()=>{l.value.clientSecret=String(de())};w(),se().then(n=>{s.value=n});const G=(n,u)=>{n?ne.confirm(`\u786E\u5B9A\u5220\u9664\u56DE\u8C03\u5730\u5740\uFF1A${n}\u5417\uFF1F`,"Warning",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{l.value.redirectUris.splice(u,1)}):l.value.redirectUris.splice(u,1)},J=k({clientName:[{required:!0,message:"\u5E94\u7528\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],redirectUris:[{validator:(n,u,o)=>{u||o(new Error("\u56DE\u8C03\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A"));for(const p of u)if(!p){o(new Error("\u56DE\u8C03\u5730\u5740\u4EFB\u610F\u4E00\u9879\u4E0D\u80FD\u4E3A\u7A7A"));return}o()},trigger:"blur"}],authorizationGrantTypes:[{type:"array",required:!0,message:"\u6388\u6743\u6A21\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],clientAuthenticationMethods:[{type:"array",required:!0,message:"\u5E94\u7528\u8BA4\u8BC1\u65B9\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"tokenSettings.accessTokenTimeToLive":[{required:!0,message:"\u5FC5\u987B\u586B\u5199Token\u5B58\u6D3B\u65F6\u95F4",trigger:"blur"}],"tokenSettings.refreshTokenTimeToLive":[{required:!0,message:"\u5FC5\u987B\u586B\u5199RefreshToken\u5B58\u6D3B\u65F6\u95F4",trigger:"blur"}]}),E=k(),A=k(!1),$=()=>{var n;(n=E.value)==null||n.validate((u,o)=>{if(u){A.value=!0;const p=JSON.parse(JSON.stringify(l.value));re(p).then(h=>{A.value=!1,h.success?O({title:"\u63D0\u793A",message:"\u5E94\u7528\u4FEE\u6539\u6210\u529F.",type:"success"}):O({title:"\u63D0\u793A",message:h.message||"\u5E94\u7528\u4FEE\u6539\u5931\u8D25.",type:"error"})}).catch(()=>{A.value=!1})}})},I=n=>{switch(n){case"SECONDS":return"\u79D2";case"MINUTES":return"\u5206";case"HOURS":return"\u65F6";case"DAYS":return"\u5929"}return"\u79D2"},H=()=>{var n;(n=E.value)==null||n.resetFields(),w()},K=()=>{l.value.redirectUris.push("")},Y=(n,u,o)=>{l.value.clientProfile=`http://k7fsqkhtbx.cdhttp.cn/system${n.data[0]}`};return(n,u)=>{const o=r("el-form-item"),p=r("el-link"),h=r("el-form"),v=r("el-input"),L=r("CopyDocument"),b=r("el-icon"),B=r("el-tooltip"),W=r("Refresh"),Q=r("el-image"),X=r("Plus"),Z=r("el-upload"),F=r("el-checkbox"),N=r("el-checkbox-group"),ee=r("Delete"),_=r("el-option"),R=r("el-select"),q=r("el-button");return c(),T(D,null,[d("div",pe,[me,d("div",_e,[s.value.issuer?(c(),g(h,{key:0,class:"demo-form-inline","label-position":"right","label-width":"auto"},{default:t(()=>[e(o,{label:"\u53D1\u884C\u5730\u5740"},{default:t(()=>[i(m(s.value.issuer),1)]),_:1}),e(o,{label:"\u8BA4\u8BC1\u7AEF\u70B9"},{default:t(()=>[e(p,{type:"primary",target:"_blank",underline:!1,href:s.value.authorization_endpoint},{default:t(()=>[i(m(s.value.authorization_endpoint),1)]),_:1},8,["href"])]),_:1}),e(o,{label:"\u5F53\u524D\u7528\u6237"},{default:t(()=>[e(p,{type:"primary",target:"_blank",underline:!1,href:s.value.userinfo_endpoint},{default:t(()=>[i(m(s.value.userinfo_endpoint),1)]),_:1},8,["href"])]),_:1}),e(o,{label:"jwks\u7AEF\u70B9"},{default:t(()=>[e(p,{target:"_blank",underline:!1,href:s.value.jwks_uri},{default:t(()=>[i(m(s.value.jwks_uri),1)]),_:1},8,["href"])]),_:1})]),_:1})):C("",!0),s.value.revocation_endpoint?(c(),g(h,{key:1,class:"demo-form-inline","label-position":"right","label-width":"auto",style:{"margin-left":"145px"}},{default:t(()=>[e(o,{label:"\u64A4\u9500Token\u7AEF\u70B9"},{default:t(()=>[e(p,{type:"warning",target:"_blank",underline:!1,href:s.value.revocation_endpoint},{default:t(()=>[i(m(s.value.revocation_endpoint),1)]),_:1},8,["href"])]),_:1}),e(o,{label:"Token\u81EA\u7701\u7AEF\u70B9"},{default:t(()=>[e(p,{type:"primary",target:"_blank",underline:!1,href:s.value.introspection_endpoint},{default:t(()=>[i(m(s.value.introspection_endpoint),1)]),_:1},8,["href"])]),_:1}),e(o,{label:"\u83B7\u53D6Token\u7AEF\u70B9"},{default:t(()=>[e(p,{type:"primary",target:"_blank",underline:!1,href:s.value.token_endpoint},{default:t(()=>[i(m(s.value.token_endpoint),1)]),_:1},8,["href"])]),_:1}),e(o,{label:"Token\u52A0\u5BC6\u65B9\u5F0F"},{default:t(()=>[i(m(s.value.id_token_signing_alg_values_supported?s.value.id_token_signing_alg_values_supported.join(","):""),1)]),_:1})]),_:1})):C("",!0)])]),l.value.clientSettings?(c(),g(h,{key:0,rules:J.value,ref_key:"authInfo",ref:E,"scroll-to-error":"",class:"client-form","label-position":"top",model:l.value},{default:t(()=>[d("div",fe,[d("div",null,[ve,e(o,{label:"\u5E94\u7528\u540D\u79F0",prop:"clientName",class:"basic-info"},{default:t(()=>[e(v,{modelValue:l.value.clientName,"onUpdate:modelValue":u[0]||(u[0]=a=>l.value.clientName=a),placeholder:"\u5E94\u7528\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(o,{label:"AppId",style:{display:"flex"},class:"basic-info"},{default:t(()=>[e(v,{disabled:"",modelValue:l.value.clientId,"onUpdate:modelValue":u[1]||(u[1]=a=>l.value.clientId=a),placeholder:"AppId"},null,8,["modelValue"]),i(" \xA0\xA0 "),e(B,{class:"box-item",effect:"dark",content:"\u590D\u5236\u5230\u526A\u5207\u677F",placement:"top"},{default:t(()=>[e(b,{class:"hand-mouse",onClick:u[2]||(u[2]=a=>V(P)(l.value.clientId))},{default:t(()=>[e(L)]),_:1})]),_:1})]),_:1}),e(o,{label:"AppSecret",class:"basic-info"},{default:t(()=>[e(v,{disabled:"",modelValue:l.value.clientSecret,"onUpdate:modelValue":u[3]||(u[3]=a=>l.value.clientSecret=a),placeholder:"AppSecret"},null,8,["modelValue"]),i("\xA0\xA0 "),e(B,{class:"box-item",effect:"dark",content:"\u91CD\u65B0\u751F\u6210App Secret",placement:"top"},{default:t(()=>[e(b,{class:"hand-mouse",onClick:j},{default:t(()=>[e(W)]),_:1})]),_:1}),i("\xA0\xA0 "),e(B,{class:"box-item",effect:"dark",content:"\u590D\u5236\u5230\u526A\u5207\u677F",placement:"top"},{default:t(()=>[e(b,{class:"hand-mouse",onClick:u[4]||(u[4]=a=>V(P)(l.value.clientSecret))},{default:t(()=>[e(L)]),_:1})]),_:1})]),_:1}),e(o,{label:"\u7B7E\u53D1\u65F6\u95F4",class:"basic-info"},{default:t(()=>[i(m(l.value.clientIdIssuedAt),1)]),_:1})]),d("div",ge,[he,e(Z,{class:"avatar-uploader",action:"http://k7fsqkhtbx.cdhttp.cn/system/file/upload",headers:V(M),"on-success":Y,"show-file-list":!1},{default:t(()=>[l.value.clientProfile?(c(),g(Q,{key:0,src:l.value.clientProfile,class:"avatar",fit:"cover"},null,8,["src"])):(c(),g(b,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[e(X)]),_:1}))]),_:1},8,["headers"])])]),d("div",ke,[d("div",be,[d("div",Fe,[Te,e(o,{label:"\u5E94\u7528\u8BBE\u7F6E",prop:"requireAuthorizationConsent"},{default:t(()=>[e(F,{modelValue:l.value.clientSettings.requireAuthorizationConsent,"onUpdate:modelValue":u[5]||(u[5]=a=>l.value.clientSettings.requireAuthorizationConsent=a)},{default:t(()=>[i(" \u6388\u6743\u786E\u8BA4 ")]),_:1},8,["modelValue"]),e(F,{modelValue:l.value.tokenSettings.reuseRefreshTokens,"onUpdate:modelValue":u[6]||(u[6]=a=>l.value.tokenSettings.reuseRefreshTokens=a)},{default:t(()=>[i(" \u91CD\u7528Refresh Token ")]),_:1},8,["modelValue"]),e(F,{modelValue:l.value.clientSettings.requireProofKey,"onUpdate:modelValue":u[7]||(u[7]=a=>l.value.clientSettings.requireProofKey=a)},{default:t(()=>[i(" \u4EC5\u652F\u6301PKCE ")]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"JwkSetUrl",class:"custom-width"},{default:t(()=>[e(v,{modelValue:l.value.clientSettings.jwkSetUrl,"onUpdate:modelValue":u[8]||(u[8]=a=>l.value.clientSettings.jwkSetUrl=a),placeholder:"JwkSetUrl"},null,8,["modelValue"])]),_:1}),e(o,{label:"\u6388\u6743\u6A21\u5F0F",prop:"authorizationGrantTypes"},{default:t(()=>[e(N,{modelValue:l.value.authorizationGrantTypes,"onUpdate:modelValue":u[9]||(u[9]=a=>l.value.authorizationGrantTypes=a)},{default:t(()=>[(c(!0),T(D,null,U(s.value.grant_types_supported,(a,f)=>(c(),g(F,{label:a,key:f},null,8,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),d("div",ye,[e(o,{label:"\u56DE\u8C03\u5730\u5740",class:"flex-item-wrap custom-width",prop:"redirectUris"},{default:t(()=>[(c(!0),T(D,null,U(l.value.redirectUris,(a,f)=>(c(),T("div",{key:f,style:{width:"100%"}},[e(v,{modelValue:l.value.redirectUris[f],"onUpdate:modelValue":z=>l.value.redirectUris[f]=z,placeholder:"\u56DE\u8C03\u5730\u5740"},null,8,["modelValue","onUpdate:modelValue"]),e(b,{onClick:z=>G(a,f),class:"icon-item"},{default:t(()=>[e(ee)]),_:2},1032,["onClick"])]))),128))]),_:1}),e(p,{icon:"CirclePlus",type:"primary",underline:!1,style:{margin:"0 0 10px 3px"},onClick:K},{default:t(()=>[i(" \u6DFB\u52A0\u56DE\u8C03\u5730\u5740 ")]),_:1}),e(o,{label:"\u5E94\u7528\u8BA4\u8BC1\u65B9\u5F0F",prop:"clientAuthenticationMethods"},{default:t(()=>[e(N,{modelValue:l.value.clientAuthenticationMethods,"onUpdate:modelValue":u[10]||(u[10]=a=>l.value.clientAuthenticationMethods=a)},{default:t(()=>[(c(!0),T(D,null,U(s.value.token_endpoint_auth_methods_supported,(a,f)=>(c(),g(F,{label:a,key:f},null,8,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),d("div",Ae,[e(o,{label:"Token\u5B58\u6D3B\u65F6\u95F4",prop:"tokenSettings.accessTokenTimeToLive"},{default:t(()=>[e(v,{modelValue:l.value.tokenSettings.accessTokenTimeToLive,"onUpdate:modelValue":u[12]||(u[12]=a=>l.value.tokenSettings.accessTokenTimeToLive=a),type:"number",placeholder:"Token\u5B58\u6D3B\u65F6\u95F4",class:"input-with-select"},{append:t(()=>[e(R,{modelValue:l.value.tokenSettings.accessTokenTimeToLiveUnit,"onUpdate:modelValue":u[11]||(u[11]=a=>l.value.tokenSettings.accessTokenTimeToLiveUnit=a),placeholder:I(l.value.tokenSettings.accessTokenTimeToLiveUnit)},{default:t(()=>[e(_,{label:"\u79D2",value:"SECONDS"}),e(_,{label:"\u5206",value:"MINUTES"}),e(_,{label:"\u65F6",value:"HOURS"}),e(_,{label:"\u5929",value:"DAYS"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"Refresh Token\u5B58\u6D3B\u65F6\u95F4",prop:"tokenSettings.refreshTokenTimeToLive",style:{"margin-left":"55px"}},{default:t(()=>[e(v,{placeholder:"RefreshToken\u5B58\u6D3B\u65F6\u95F4",class:"input-with-select",type:"number",modelValue:l.value.tokenSettings.refreshTokenTimeToLive,"onUpdate:modelValue":u[14]||(u[14]=a=>l.value.tokenSettings.refreshTokenTimeToLive=a)},{append:t(()=>[e(R,{modelValue:l.value.tokenSettings.refreshTokenTimeToLiveUnit,"onUpdate:modelValue":u[13]||(u[13]=a=>l.value.tokenSettings.refreshTokenTimeToLiveUnit=a),placeholder:I(l.value.tokenSettings.refreshTokenTimeToLiveUnit)},{default:t(()=>[e(_,{label:"\u79D2",value:"SECONDS"}),e(_,{label:"\u5206",value:"MINUTES"}),e(_,{label:"\u65F6",value:"HOURS"}),e(_,{label:"\u5929",value:"DAYS"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["modelValue"])]),_:1})])])]),e(o,null,{default:t(()=>[e(q,{type:"primary",onClick:$,loading:A.value,style:{width:"150px"}},{default:t(()=>[i("\u4FDD\u5B58")]),_:1},8,["loading"]),e(q,{type:"info",plain:"",onClick:H},{default:t(()=>[i("\u91CD\u7F6E")]),_:1})]),_:1})])]),_:1},8,["rules","model"])):C("",!0)],64)}}});const we=ce(De,[["__scopeId","data-v-b5e828d2"]]);export{we as default};
